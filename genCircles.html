<html>
  <head>
  <meta charset="utf-8"> 
    <script src="./d3.v5.min.js"></script>
    <meta http-equiv="refresh" content="2"> 
<style>
body {
  padding: 0;
  margin: 10;
}
</style>
</head>
<body>

<script>

class Chart {
	constructor(options = {}) {
		Object.assign(this, {
			size: 300,
			steps: 15,
			circleCountBoundary: [15, 20],
			colorPalette: ['#CF6EC5', '#45246B', '#A3E0D4', '#A6DB94'],
			radiusStepsBoundary: [1, 3]
		
		}, options);

		this.stepSize = this.size / this.steps;
		this.circleCount = this.getRandomInt(this.circleCountBoundary[0], this.circleCountBoundary[1]); /* bähhh =( */

		this.circlesData = []
		this.generateCirclesData();

	}

	generateCirclesData () {

		for (var i = this.circleCount; i > 0; i--) {

			var radiusSteps = this.getRandomInt(this.radiusStepsBoundary[0], this.radiusStepsBoundary[1]); /* bähhh =( */
			var radius = radiusSteps * this.stepSize;

			var x = this.getRandomInt(0, this.steps) * this.stepSize;
			var y = this.getRandomInt(0, this.steps) * this.stepSize;

			var color = this.getRandomFromPalette();
			this.circlesData.push({"x" : x, "y": y,  "radius": radius, "color": color});

		}
	}

	draw() {

		this.svgContainer = d3.select("body").append("svg")
			.attr("width", this.size)
			.attr("height", this.size);

		this.circles = this.svgContainer.selectAll("circle")
			.data(this.circlesData)
			.enter()
			.append("circle");


		this.circleAttributes = this.circles
			.attr("cx", function(d) {return d.x;})
			.attr("cy", function(d) {return d.y;})
			.attr("r", function(d) {return d.radius;})
			.style("fill", function(d) {return d.color;})
			.style("opacity", 0.7);

	}


	getRandomFromPalette() {
		return this.colorPalette[this.getRandomInt(0, this.colorPalette.length -1)];
	}

	getRandomInt(min, max) {
		return Math.floor(Math.random() * (max - min + 1) ) + min;
	}


}

</script>

<script>

charts = []

for(i=0; i<=5; i++) {
	charts.push(new Chart);
}

charts.forEach(function(c) {c.draw();});


</script>
</body>
</html>
